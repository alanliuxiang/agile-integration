
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Split and Transform REST · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../rest-publish-and-fix-errors/" />
    
    
    <link rel="prev" href="../file-split-transform/" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    INTRODUCTION
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../fuse/">
            
                <a href="../fuse/">
            
                    
                    Fuse 7
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../fuse/software.html">
            
                <a href="../fuse/software.html">
            
                    
                    软件安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../labs.html">
            
                <a href="../labs.html">
            
                    
                    LABS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../file-split-transform/">
            
                <a href="../file-split-transform/">
            
                    
                    Split and Transform Files
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.2.2" data-path="./">
            
                <a href="./">
            
                    
                    Split and Transform REST
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="../rest-publish-and-fix-errors/">
            
                <a href="../rest-publish-and-fix-errors/">
            
                    
                    Publish Records and Fix Errors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="../enrich-content-rest-and-ws-microservices/">
            
                <a href="../enrich-content-rest-and-ws-microservices/">
            
                    
                    Enrich Content and Aggregate Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="../legacy-soap-rest-wrapper/">
            
                <a href="../legacy-soap-rest-wrapper/">
            
                    
                    Migrate Legacy SOAP Services
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../3scale/readme.html">
            
                <a href="../3scale/readme.html">
            
                    
                    3Scale
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../3scale/admin-portal.html">
            
                <a href="../3scale/admin-portal.html">
            
                    
                    管理门户
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../3scale/manage-api.html">
            
                <a href="../3scale/manage-api.html">
            
                    
                    API 管理示例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../3scale/application-plans.html">
            
                <a href="../3scale/application-plans.html">
            
                    
                    Application Plans
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Split and Transform REST</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="split-and-transform-files">Split and Transform Files</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_overview">Overview</a></li>
<li><a href="#_goals">Goals</a></li>
<li><a href="#_camelcontext">camelContext</a></li>
<li><a href="#__">&#x672C;&#x5730;&#x8FD0;&#x884C;</a></li>
<li><a href="#__openshift">&#x90E8;&#x7F72;&#x5230; OpenShift</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this lab, you develop Camel routes that read from rest, split them into individual records, and transform them into Java objects that are written as individual JSON files. The transformation is done using the Fuse Integration Editor. You also develop exception handling logic to process incorrectly formatted records, the result persist to AMQ.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_goals">Goals</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Build an Apache Camel route that consumes CSV records from REST API and transforms the records into Java objects using the Bindy transformation component</p>
</li>
<li>
<p>Split the list of received Java objects and apply a Java-to-Java transformation using the Fuse Integration Editor (from <code>org.acme.Customer</code> to <code>org.globex.Account</code>)</p>
</li>
<li>
<p>Map the fields as defined within the table</p>
</li>
<li>
<p>Transform the <code>org.globex.Account</code> Java objects into individual JSON records</p>
</li>
<li>
<p>Move the JSON record to a message broker Queue</p>
</li>
<li>
<p>Implement the DLQ pattern to move erroneous CSV records into an error queue</p>
</li>
<li>
<p>Design a unit test to validate the data transformations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="src/img/index.png" alt="index.png"></span></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_camelcontext">camelContext</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span>
    <span class="hljs-attr">xmlns:camel</span>=<span class="hljs-string">&quot;http://camel.apache.org/schema/spring&quot;</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd        http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd&quot;</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Define a traditional camel context here --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">camelContext</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;camel&quot;</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://camel.apache.org/schema/spring&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">propertyPlaceholder</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;properties&quot;</span> <span class="hljs-attr">location</span>=<span class="hljs-string">&quot;route.properties&quot;</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">endpoint</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;csv2json&quot;</span> <span class="hljs-attr">uri</span>=<span class="hljs-string">&quot;dozer:csv2json2?sourceModel=org.acme.Customer&amp;amp;targetModel=org.globex.Account&amp;amp;marshalId=json&amp;amp;unmarshalId=csv&amp;amp;mappingFile=transformation.xml&quot;</span>/&gt;</span>
        <span class="hljs-comment">&lt;!-- CSV Input &amp; JSon OutPut DataFormat --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dataFormats</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">bindy</span> <span class="hljs-attr">classType</span>=<span class="hljs-string">&quot;org.acme.Customer&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;csv&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Csv&quot;</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">json</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;json&quot;</span> <span class="hljs-attr">library</span>=<span class="hljs-string">&quot;Jackson&quot;</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dataFormats</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">restConfiguration</span> <span class="hljs-attr">bindingMode</span>=<span class="hljs-string">&quot;off&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&quot;servlet&quot;</span> <span class="hljs-attr">contextPath</span>=<span class="hljs-string">&quot;/rest&quot;</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">rest</span> <span class="hljs-attr">apiDocs</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;rest-entry&quot;</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;/service&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">post</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;rest-entry_post&quot;</span> <span class="hljs-attr">uri</span>=<span class="hljs-string">&quot;/customers&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">to</span> <span class="hljs-attr">uri</span>=<span class="hljs-string">&quot;direct:inbox&quot;</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">post</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">rest</span>&gt;</span>
        <span class="hljs-comment">&lt;!--
             Transformation Endpoint doing csv2java conversion
             Step 1 : csv record is converted java using camel bindy
             Step 2 : Dozer transformation of Customer to Account
             Step 3 : Java to Json conversion using json jackson
        --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">route</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;_route1&quot;</span> <span class="hljs-attr">streamCache</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- Consume files from input directory --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">from</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;_from1&quot;</span> <span class="hljs-attr">uri</span>=<span class="hljs-string">&quot;direct:inbox&quot;</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">onException</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;_onException1&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">exception</span>&gt;</span>java.lang.IllegalArgumentException<span class="hljs-tag">&lt;/<span class="hljs-name">exception</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">handled</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">constant</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">constant</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">handled</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">log</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;_log1&quot;</span> <span class="hljs-attr">message</span>=<span class="hljs-string">&quot;&gt;&gt; Exception : ${body}&quot;</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">setExchangePattern</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;_setExchangePattern1&quot;</span> <span class="hljs-attr">pattern</span>=<span class="hljs-string">&quot;InOnly&quot;</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">to</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;_to1&quot;</span> <span class="hljs-attr">uri</span>=<span class="hljs-string">&quot;amqp:queue:errorQueue&quot;</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">onException</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">split</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;_split1&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">tokenize</span> <span class="hljs-attr">token</span>=<span class="hljs-string">&quot;;&quot;</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">to</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;_to2&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;csv2json&quot;</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">setExchangePattern</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;_setExchangePattern2&quot;</span> <span class="hljs-attr">pattern</span>=<span class="hljs-string">&quot;InOnly&quot;</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">to</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;_to3&quot;</span> <span class="hljs-attr">uri</span>=<span class="hljs-string">&quot;amqp:queue:accountQueue&quot;</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">log</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;_log2&quot;</span> <span class="hljs-attr">message</span>=<span class="hljs-string">&quot;&gt;&gt; Completed JSON: ${body}&quot;</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">split</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">transform</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;_transform1&quot;</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">constant</span>&gt;</span>Processed the customer data<span class="hljs-tag">&lt;/<span class="hljs-name">constant</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">transform</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">route</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">camelContext</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="__">&#x672C;&#x5730;&#x8FD0;&#x884C;</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title"><strong>1. &#x521B;&#x5EFA;&#x5E76;&#x542F;&#x52A8; AMQ broker</strong></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ cd amq-broker-<span class="hljs-number">7.2</span>.0/
$ ./bin/artemis create  --user admin --password password --role admin --allow-anonymous y ./instances/broker1
$ cd instances/broker1/
$ ./bin/artemis run</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x542F;&#x52A8; Spring Boot camel route</strong></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ cd fuse-get-started/rest-split-transform-amq/ &amp;&amp; mvn clean install
$ java -jar target/rest-split-transform-amq-<span class="hljs-number">1.0</span>.0.jar</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. &#x6267;&#x884C; REST Post &#x89E6;&#x53D1;&#x4E00;&#x6B21;&#x6D41;&#x7A0B;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ curl -k http:<span class="hljs-comment">//localhost:8080/rest/service/customers -X POST  -d &apos;Rotobots,NA,true,Bill,Smith,100 N Park Ave.,Phoenix,AZ,85017,602-555-1100;BikesBikesBikes,NA,true,George,Jungle,1101 Smith St.,Raleigh,NC,27519,919-555-0800;CloudyCloud,EU,true,Fred,Quicksand,202 Barney Blvd.,Rock City,MI,19728,313-555-1234;ErrorError,,,EU,true,Fred,Quicksand,202 Barney Blvd.,Rock City,MI,19728,313-555-1234&apos; -H &apos;content-type: text/html&apos;</span>
Processed the customer data</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>4. &#x67E5;&#x770B; Spring Boot camel route &#x8FD0;&#x884C;&#x65E5;&#x5FD7;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-number">10</span>:<span class="hljs-number">49</span>:<span class="hljs-number">15.742</span> [AmqpProvider :(<span class="hljs-number">1</span>):[amqp:<span class="hljs-comment">//localhost:5672]] INFO  o.a.q.jms.sasl.SaslMechanismFinder - Best match for SASL auth was: SASL-PLAIN</span>
<span class="hljs-number">10</span>:<span class="hljs-number">49</span>:<span class="hljs-number">15.904</span> [AmqpProvider :(<span class="hljs-number">1</span>):[amqp:<span class="hljs-comment">//localhost:5672]] INFO  org.apache.qpid.jms.JmsConnection - Connection ID:fc401104-03e1-4f44-804b-4d995c702cd6:1 connected to remote Broker: amqp://localhost:5672</span>
<span class="hljs-number">10</span>:<span class="hljs-number">49</span>:<span class="hljs-number">16.013</span> [XNIO-<span class="hljs-number">3</span> task-<span class="hljs-number">1</span>] INFO  _route1 - &gt;&gt; Completed JSON: {<span class="hljs-string">&quot;company&quot;</span>:{<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Rotobots&quot;</span>,<span class="hljs-string">&quot;geo&quot;</span>:<span class="hljs-string">&quot;NA&quot;</span>,<span class="hljs-string">&quot;active&quot;</span>:<span class="hljs-keyword">true</span>},<span class="hljs-string">&quot;contact&quot;</span>:{<span class="hljs-string">&quot;firstName&quot;</span>:<span class="hljs-string">&quot;Bill&quot;</span>,<span class="hljs-string">&quot;lastName&quot;</span>:<span class="hljs-string">&quot;Smith&quot;</span>,<span class="hljs-string">&quot;streetAddr&quot;</span>:<span class="hljs-string">&quot;100 N Park Ave.&quot;</span>,<span class="hljs-string">&quot;city&quot;</span>:<span class="hljs-string">&quot;Phoenix&quot;</span>,<span class="hljs-string">&quot;state&quot;</span>:<span class="hljs-string">&quot;AZ&quot;</span>,<span class="hljs-string">&quot;zip&quot;</span>:<span class="hljs-string">&quot;85017&quot;</span>,<span class="hljs-string">&quot;phone&quot;</span>:<span class="hljs-string">&quot;602-555-1100&quot;</span>}}
<span class="hljs-number">10</span>:<span class="hljs-number">49</span>:<span class="hljs-number">16.017</span> [XNIO-<span class="hljs-number">3</span> task-<span class="hljs-number">1</span>] INFO  _route1 - &gt;&gt; Completed JSON: {<span class="hljs-string">&quot;company&quot;</span>:{<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;BikesBikesBikes&quot;</span>,<span class="hljs-string">&quot;geo&quot;</span>:<span class="hljs-string">&quot;NA&quot;</span>,<span class="hljs-string">&quot;active&quot;</span>:<span class="hljs-keyword">true</span>},<span class="hljs-string">&quot;contact&quot;</span>:{<span class="hljs-string">&quot;firstName&quot;</span>:<span class="hljs-string">&quot;George&quot;</span>,<span class="hljs-string">&quot;lastName&quot;</span>:<span class="hljs-string">&quot;Jungle&quot;</span>,<span class="hljs-string">&quot;streetAddr&quot;</span>:<span class="hljs-string">&quot;1101 Smith St.&quot;</span>,<span class="hljs-string">&quot;city&quot;</span>:<span class="hljs-string">&quot;Raleigh&quot;</span>,<span class="hljs-string">&quot;state&quot;</span>:<span class="hljs-string">&quot;NC&quot;</span>,<span class="hljs-string">&quot;zip&quot;</span>:<span class="hljs-string">&quot;27519&quot;</span>,<span class="hljs-string">&quot;phone&quot;</span>:<span class="hljs-string">&quot;919-555-0800&quot;</span>}}
<span class="hljs-number">10</span>:<span class="hljs-number">49</span>:<span class="hljs-number">16.021</span> [XNIO-<span class="hljs-number">3</span> task-<span class="hljs-number">1</span>] INFO  _route1 - &gt;&gt; Completed JSON: {<span class="hljs-string">&quot;company&quot;</span>:{<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;CloudyCloud&quot;</span>,<span class="hljs-string">&quot;geo&quot;</span>:<span class="hljs-string">&quot;EU&quot;</span>,<span class="hljs-string">&quot;active&quot;</span>:<span class="hljs-keyword">true</span>},<span class="hljs-string">&quot;contact&quot;</span>:{<span class="hljs-string">&quot;firstName&quot;</span>:<span class="hljs-string">&quot;Fred&quot;</span>,<span class="hljs-string">&quot;lastName&quot;</span>:<span class="hljs-string">&quot;Quicksand&quot;</span>,<span class="hljs-string">&quot;streetAddr&quot;</span>:<span class="hljs-string">&quot;202 Barney Blvd.&quot;</span>,<span class="hljs-string">&quot;city&quot;</span>:<span class="hljs-string">&quot;Rock City&quot;</span>,<span class="hljs-string">&quot;state&quot;</span>:<span class="hljs-string">&quot;MI&quot;</span>,<span class="hljs-string">&quot;zip&quot;</span>:<span class="hljs-string">&quot;19728&quot;</span>,<span class="hljs-string">&quot;phone&quot;</span>:<span class="hljs-string">&quot;313-555-1234&quot;</span>}}
<span class="hljs-number">10</span>:<span class="hljs-number">49</span>:<span class="hljs-number">16.024</span> [XNIO-<span class="hljs-number">3</span> task-<span class="hljs-number">1</span>] INFO  _route1 - &gt;&gt; Exception : ErrorError,,,EU,<span class="hljs-keyword">true</span>,Fred,Quicksand,<span class="hljs-number">202</span> Barney Blvd.,Rock City,MI,<span class="hljs-number">19728</span>,<span class="hljs-number">313</span>-<span class="hljs-number">555</span>-<span class="hljs-number">1234</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>5. &#x67E5;&#x770B; AMQ &#x63A7;&#x5236;&#x53F0;</strong></p>
</div>
<div class="paragraph">
<p>&#x67E5;&#x770B; AMQ &#x63A7;&#x5236;&#x53F0;&#x4F1A;&#x53D1;&#x73B0;&#x6709;&#x4E24;&#x4E2A; Queue &#x521B;&#x5EFA;&#xFF1A;accountQueue&#x3001;errorQueue&#x3002;</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="__openshift">&#x90E8;&#x7F72;&#x5230; OpenShift</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title"><strong>1. &#x767B;&#x5F55;&#x5230; OpenShift</strong></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ oc login https:<span class="hljs-comment">//master.apps.example.com:8443</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>2. &#x90E8;&#x7F72; Spring Boot Camel route &#x5230; OpenShift</strong></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ mvn fabric8:deploy -Popenshift</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>3. Expose rest-split-transform-amq</strong></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ oc expose svc rest-split-transform-amq</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><strong>4. &#x6267;&#x884C; REST Post &#x89E6;&#x53D1;&#x4E00;&#x6B21;&#x6D41;&#x7A0B;</strong></div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">$ curl -k http:<span class="hljs-comment">//HOST/rest/service/customers -X POST  -d &apos;Rotobots,NA,true,Bill,Smith,100 N Park Ave.,Phoenix,AZ,85017,602-555-1100;BikesBikesBikes,NA,true,George,Jungle,1101 Smith St.,Raleigh,NC,27519,919-555-0800;CloudyCloud,EU,true,Fred,Quicksand,202 Barney Blvd.,Rock City,MI,19728,313-555-1234;ErrorError,,,EU,true,Fred,Quicksand,202 Barney Blvd.,Rock City,MI,19728,313-555-1234&apos; -H &apos;content-type: text/html&apos;</span></code></pre>
</div>
</div>
</div>
</div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../file-split-transform/" class="navigation navigation-prev " aria-label="Previous page: Split and Transform Files">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../rest-publish-and-fix-errors/" class="navigation navigation-next " aria-label="Next page: Publish Records and Fix Errors">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Split and Transform REST","level":"1.2.2.2","depth":3,"next":{"title":"Publish Records and Fix Errors","level":"1.2.2.3","depth":3,"path":"rest-publish-and-fix-errors/README.adoc","ref":"rest-publish-and-fix-errors/README.adoc","articles":[]},"previous":{"title":"Split and Transform Files","level":"1.2.2.1","depth":3,"path":"file-split-transform/README.adoc","ref":"file-split-transform/README.adoc","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{"GUID":"na39","OCP_USER_ID":"ksoong-redhat.com","copyrightYear":"2018","copyrightHolder":"Kylin Soong"},"plugins":["collapsible-menu","donate","-sharing","sharing-plus","splitter","back-to-top-button","edit-link"],"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy Kylin Soong 2018","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"collapsible-menu":{},"splitter":{},"search":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"donate":{"alipay":"http://ksoong.org/docs/content/images/alipay.png","alipayText":"支付宝捐赠","button":"赞赏","title":"","wechat":"http://ksoong.org/docs/content/images/wechat.png","wechatText":"微信捐赠"},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"back-to-top-button":{},"sharing":{"weibo":true,"linkedin":true,"google":true,"facebook":true,"all":["facebook","google","linkedin","weibo"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/kylinsoong/fuse-get-started"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css"}},"file":{"path":"rest-split-transform-amq/README.adoc","mtime":"2019-01-19T16:08:14.518Z","type":"asciidoc"},"gitbook":{"version":"3.2.3","time":"2019-01-20T14:43:19.535Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

